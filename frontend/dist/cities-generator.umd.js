(function(L,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react")):typeof define=="function"&&define.amd?define(["exports","react"],E):(L=typeof globalThis<"u"?globalThis:L||self,E(L.CitiesGenerator={},L.React))})(this,function(L,E){"use strict";var Rr=Object.defineProperty;var wr=(L,E,V)=>E in L?Rr(L,E,{enumerable:!0,configurable:!0,writable:!0,value:V}):L[E]=V;var ze=(L,E,V)=>wr(L,typeof E!="symbol"?E+"":E,V);var V={exports:{}},Q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var he;function Ge(){if(he)return Q;he=1;var h=E,d=Symbol.for("react.element"),v=Symbol.for("react.fragment"),w=Object.prototype.hasOwnProperty,_=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function T(S,A,O){var u,R={},m=null,C=null;O!==void 0&&(m=""+O),A.key!==void 0&&(m=""+A.key),A.ref!==void 0&&(C=A.ref);for(u in A)w.call(A,u)&&!x.hasOwnProperty(u)&&(R[u]=A[u]);if(S&&S.defaultProps)for(u in A=S.defaultProps,A)R[u]===void 0&&(R[u]=A[u]);return{$$typeof:d,type:S,key:m,ref:C,props:R,_owner:_.current}}return Q.Fragment=v,Q.jsx=T,Q.jsxs=T,Q}var X={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ve;function We(){return ve||(ve=1,process.env.NODE_ENV!=="production"&&function(){var h=E,d=Symbol.for("react.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),z=Symbol.iterator,B="@@iterator";function G(e){if(e===null||typeof e!="object")return null;var r=z&&e[z]||e[B];return typeof r=="function"?r:null}var P=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function c(e){{for(var r=arguments.length,t=new Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];U("error",e,t)}}function U(e,r,t){{var o=P.ReactDebugCurrentFrame,p=o.getStackAddendum();p!==""&&(r+="%s",t=t.concat([p]));var g=t.map(function(s){return String(s)});g.unshift("Warning: "+r),Function.prototype.apply.call(console[e],console,g)}}var f=!1,l=!1,b=!1,D=!1,$=!1,M;M=Symbol.for("react.module.reference");function W(e){return!!(typeof e=="string"||typeof e=="function"||e===w||e===x||$||e===_||e===O||e===u||D||e===C||f||l||b||typeof e=="object"&&e!==null&&(e.$$typeof===m||e.$$typeof===R||e.$$typeof===T||e.$$typeof===S||e.$$typeof===A||e.$$typeof===M||e.getModuleId!==void 0))}function K(e,r,t){var o=e.displayName;if(o)return o;var p=r.displayName||r.name||"";return p!==""?t+"("+p+")":t}function n(e){return e.displayName||"Context"}function j(e){if(e==null)return null;if(typeof e.tag=="number"&&c("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case v:return"Portal";case x:return"Profiler";case _:return"StrictMode";case O:return"Suspense";case u:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case S:var r=e;return n(r)+".Consumer";case T:var t=e;return n(t._context)+".Provider";case A:return K(e,e.render,"ForwardRef");case R:var o=e.displayName||null;return o!==null?o:j(e.type)||"Memo";case m:{var p=e,g=p._payload,s=p._init;try{return j(s(g))}catch{return null}}}return null}var k=Object.assign,q=0,Ee,Ae,me,Se,be,Re,we;function Ce(){}Ce.__reactDisabledLog=!0;function Je(){{if(q===0){Ee=console.log,Ae=console.info,me=console.warn,Se=console.error,be=console.group,Re=console.groupCollapsed,we=console.groupEnd;var e={configurable:!0,enumerable:!0,value:Ce,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}q++}}function Ze(){{if(q--,q===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:k({},e,{value:Ee}),info:k({},e,{value:Ae}),warn:k({},e,{value:me}),error:k({},e,{value:Se}),group:k({},e,{value:be}),groupCollapsed:k({},e,{value:Re}),groupEnd:k({},e,{value:we})})}q<0&&c("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var ie=P.ReactCurrentDispatcher,se;function re(e,r,t){{if(se===void 0)try{throw Error()}catch(p){var o=p.stack.trim().match(/\n( *(at )?)/);se=o&&o[1]||""}return`
`+se+e}}var ce=!1,te;{var Qe=typeof WeakMap=="function"?WeakMap:Map;te=new Qe}function ye(e,r){if(!e||ce)return"";{var t=te.get(e);if(t!==void 0)return t}var o;ce=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var g;g=ie.current,ie.current=null,Je();try{if(r){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(I){o=I}Reflect.construct(e,[],s)}else{try{s.call()}catch(I){o=I}e.call(s.prototype)}}else{try{throw Error()}catch(I){o=I}e()}}catch(I){if(I&&o&&typeof I.stack=="string"){for(var a=I.stack.split(`
`),N=o.stack.split(`
`),y=a.length-1,F=N.length-1;y>=1&&F>=0&&a[y]!==N[F];)F--;for(;y>=1&&F>=0;y--,F--)if(a[y]!==N[F]){if(y!==1||F!==1)do if(y--,F--,F<0||a[y]!==N[F]){var Y=`
`+a[y].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),typeof e=="function"&&te.set(e,Y),Y}while(y>=1&&F>=0);break}}}finally{ce=!1,ie.current=g,Ze(),Error.prepareStackTrace=p}var Z=e?e.displayName||e.name:"",H=Z?re(Z):"";return typeof e=="function"&&te.set(e,H),H}function Xe(e,r,t){return ye(e,!1)}function qe(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function ne(e,r,t){if(e==null)return"";if(typeof e=="function")return ye(e,qe(e));if(typeof e=="string")return re(e);switch(e){case O:return re("Suspense");case u:return re("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case A:return Xe(e.render);case R:return ne(e.type,r,t);case m:{var o=e,p=o._payload,g=o._init;try{return ne(g(p),r,t)}catch{}}}return""}var ee=Object.prototype.hasOwnProperty,_e={},Te=P.ReactDebugCurrentFrame;function oe(e){if(e){var r=e._owner,t=ne(e.type,e._source,r?r.type:null);Te.setExtraStackFrame(t)}else Te.setExtraStackFrame(null)}function er(e,r,t,o,p){{var g=Function.call.bind(ee);for(var s in e)if(g(e,s)){var a=void 0;try{if(typeof e[s]!="function"){var N=Error((o||"React class")+": "+t+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw N.name="Invariant Violation",N}a=e[s](r,s,o,t,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(y){a=y}a&&!(a instanceof Error)&&(oe(p),c("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",o||"React class",t,s,typeof a),oe(null)),a instanceof Error&&!(a.message in _e)&&(_e[a.message]=!0,oe(p),c("Failed %s type: %s",t,a.message),oe(null))}}}var rr=Array.isArray;function le(e){return rr(e)}function tr(e){{var r=typeof Symbol=="function"&&Symbol.toStringTag,t=r&&e[Symbol.toStringTag]||e.constructor.name||"Object";return t}}function nr(e){try{return Fe(e),!1}catch{return!0}}function Fe(e){return""+e}function Oe(e){if(nr(e))return c("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",tr(e)),Fe(e)}var je=P.ReactCurrentOwner,or={key:!0,ref:!0,__self:!0,__source:!0},xe,Pe;function ar(e){if(ee.call(e,"ref")){var r=Object.getOwnPropertyDescriptor(e,"ref").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function ir(e){if(ee.call(e,"key")){var r=Object.getOwnPropertyDescriptor(e,"key").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function sr(e,r){typeof e.ref=="string"&&je.current}function cr(e,r){{var t=function(){xe||(xe=!0,c("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"key",{get:t,configurable:!0})}}function lr(e,r){{var t=function(){Pe||(Pe=!0,c("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",r))};t.isReactWarning=!0,Object.defineProperty(e,"ref",{get:t,configurable:!0})}}var ur=function(e,r,t,o,p,g,s){var a={$$typeof:d,type:e,key:r,ref:t,props:s,_owner:g};return a._store={},Object.defineProperty(a._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(a,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(a,"_source",{configurable:!1,enumerable:!1,writable:!1,value:p}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a};function fr(e,r,t,o,p){{var g,s={},a=null,N=null;t!==void 0&&(Oe(t),a=""+t),ir(r)&&(Oe(r.key),a=""+r.key),ar(r)&&(N=r.ref,sr(r,p));for(g in r)ee.call(r,g)&&!or.hasOwnProperty(g)&&(s[g]=r[g]);if(e&&e.defaultProps){var y=e.defaultProps;for(g in y)s[g]===void 0&&(s[g]=y[g])}if(a||N){var F=typeof e=="function"?e.displayName||e.name||"Unknown":e;a&&cr(s,F),N&&lr(s,F)}return ur(e,a,N,p,o,je.current,s)}}var ue=P.ReactCurrentOwner,Ue=P.ReactDebugCurrentFrame;function J(e){if(e){var r=e._owner,t=ne(e.type,e._source,r?r.type:null);Ue.setExtraStackFrame(t)}else Ue.setExtraStackFrame(null)}var fe;fe=!1;function de(e){return typeof e=="object"&&e!==null&&e.$$typeof===d}function Ne(){{if(ue.current){var e=j(ue.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function dr(e){return""}var De={};function pr(e){{var r=Ne();if(!r){var t=typeof e=="string"?e:e.displayName||e.name;t&&(r=`

Check the top-level render call using <`+t+">.")}return r}}function Me(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var t=pr(r);if(De[t])return;De[t]=!0;var o="";e&&e._owner&&e._owner!==ue.current&&(o=" It was passed a child from "+j(e._owner.type)+"."),J(e),c('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',t,o),J(null)}}function ke(e,r){{if(typeof e!="object")return;if(le(e))for(var t=0;t<e.length;t++){var o=e[t];de(o)&&Me(o,r)}else if(de(e))e._store&&(e._store.validated=!0);else if(e){var p=G(e);if(typeof p=="function"&&p!==e.entries)for(var g=p.call(e),s;!(s=g.next()).done;)de(s.value)&&Me(s.value,r)}}}function hr(e){{var r=e.type;if(r==null||typeof r=="string")return;var t;if(typeof r=="function")t=r.propTypes;else if(typeof r=="object"&&(r.$$typeof===A||r.$$typeof===R))t=r.propTypes;else return;if(t){var o=j(r);er(t,e.props,"prop",o,e)}else if(r.PropTypes!==void 0&&!fe){fe=!0;var p=j(r);c("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",p||"Unknown")}typeof r.getDefaultProps=="function"&&!r.getDefaultProps.isReactClassApproved&&c("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function vr(e){{for(var r=Object.keys(e.props),t=0;t<r.length;t++){var o=r[t];if(o!=="children"&&o!=="key"){J(e),c("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",o),J(null);break}}e.ref!==null&&(J(e),c("Invalid attribute `ref` supplied to `React.Fragment`."),J(null))}}var Ie={};function Le(e,r,t,o,p,g){{var s=W(e);if(!s){var a="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(a+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var N=dr();N?a+=N:a+=Ne();var y;e===null?y="null":le(e)?y="array":e!==void 0&&e.$$typeof===d?(y="<"+(j(e.type)||"Unknown")+" />",a=" Did you accidentally export a JSX literal instead of a component?"):y=typeof e,c("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",y,a)}var F=fr(e,r,t,p,g);if(F==null)return F;if(s){var Y=r.children;if(Y!==void 0)if(o)if(le(Y)){for(var Z=0;Z<Y.length;Z++)ke(Y[Z],e);Object.freeze&&Object.freeze(Y)}else c("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ke(Y,e)}if(ee.call(r,"key")){var H=j(e),I=Object.keys(r).filter(function(br){return br!=="key"}),pe=I.length>0?"{key: someKey, "+I.join(": ..., ")+": ...}":"{key: someKey}";if(!Ie[H+pe]){var Sr=I.length>0?"{"+I.join(": ..., ")+": ...}":"{}";c(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,pe,H,Sr,H),Ie[H+pe]=!0}}return e===w?vr(F):hr(F),F}}function gr(e,r,t){return Le(e,r,t,!0)}function Er(e,r,t){return Le(e,r,t,!1)}var Ar=Er,mr=gr;X.Fragment=w,X.jsx=Ar,X.jsxs=mr}()),X}process.env.NODE_ENV==="production"?V.exports=Ge():V.exports=We();var i=V.exports;function Ye(h){const d={IT:"EU",GB:"EU",FR:"EU",DE:"EU",ES:"EU",PT:"EU",NL:"EU",BE:"EU",CH:"EU",AT:"EU",SE:"EU",NO:"EU",DK:"EU",FI:"EU",PL:"EU",GR:"EU",IE:"EU",CZ:"EU",HU:"EU",RO:"EU",BG:"EU",HR:"EU",SK:"EU",SI:"EU",LT:"EU",LV:"EU",EE:"EU",LU:"EU",MT:"EU",CY:"EU",IS:"EU",LI:"EU",MC:"EU",SM:"EU",VA:"EU",AD:"EU",AL:"EU",BA:"EU",ME:"EU",MK:"EU",RS:"EU",XK:"EU",UA:"EU",BY:"EU",MD:"EU",RU:"EU",US:"NA",CA:"NA",MX:"NA",GT:"NA",BZ:"NA",SV:"NA",HN:"NA",NI:"NA",CR:"NA",PA:"NA",CU:"NA",JM:"NA",HT:"NA",DO:"NA",BS:"NA",BB:"NA",TT:"NA",BR:"SA",AR:"SA",CL:"SA",CO:"SA",PE:"SA",VE:"SA",EC:"SA",BO:"SA",PY:"SA",UY:"SA",GY:"SA",SR:"SA",GF:"SA",FK:"SA",CN:"AS",JP:"AS",IN:"AS",KR:"AS",KP:"AS",ID:"AS",TH:"AS",VN:"AS",PH:"AS",MY:"AS",SG:"AS",BD:"AS",PK:"AS",AF:"AS",IR:"AS",IQ:"AS",SA:"AS",AE:"AS",IL:"AS",TR:"AS",KZ:"AS",UZ:"AS",MM:"AS",LK:"AS",NP:"AS",KH:"AS",LA:"AS",MN:"AS",TW:"AS",HK:"AS",MO:"AS",ZA:"AF",EG:"AF",NG:"AF",KE:"AF",ET:"AF",GH:"AF",TZ:"AF",UG:"AF",DZ:"AF",MA:"AF",SD:"AF",AO:"AF",MZ:"AF",ZM:"AF",ZW:"AF",MW:"AF",MG:"AF",CM:"AF",CI:"AF",SN:"AF",ML:"AF",BF:"AF",NE:"AF",TD:"AF",LY:"AF",TN:"AF",RW:"AF",BJ:"AF",TG:"AF",GN:"AF",SL:"AF",LR:"AF",MR:"AF",GM:"AF",GW:"AF",CV:"AF",ST:"AF",GQ:"AF",GA:"AF",CG:"AF",CD:"AF",CF:"AF",SS:"AF",ER:"AF",DJ:"AF",SO:"AF",KM:"AF",MU:"AF",SC:"AF",BW:"AF",NA:"AF",LS:"AF",SZ:"AF",AU:"OC",NZ:"OC",PG:"OC",FJ:"OC",NC:"OC",PF:"OC",SB:"OC",VU:"OC",WS:"OC",TO:"OC",KI:"OC",FM:"OC",MH:"OC",PW:"OC",TV:"OC",NR:"OC",AQ:"AN"},v=h.toUpperCase();return d[v]||"EU"}const ge=({data:h,dataUrl:d,country:v,language:w,username:_,password:x})=>{const[T,S]=E.useState(h||null),[A,O]=E.useState(!1),[u,R]=E.useState(null);return E.useEffect(()=>{if(h){S(h);return}if(v){R(null),S(null);const C=(d||"https://raw.githubusercontent.com/flashboss/cities-generator/master/_db").replace(/\.json$/,"").replace(/\/$/,""),z=(w||"it").toLowerCase(),B=v.toUpperCase(),G=Ye(B),P=`${C}/${G}/${B}/${z}.json`;(async()=>{O(!0),R(null);try{const U={};if(_&&x){const b=btoa(`${_}:${x}`);U.Authorization=`Basic ${b}`}const f=await fetch(P,{headers:U});if(!f.ok)throw new Error(`Failed to load data: ${f.status} ${f.statusText}`);const l=await f.json();S(l)}catch(U){const f=U instanceof Error?U.message:"Failed to load country data";R(f),S(null)}finally{O(!1)}})()}},[h,v,w,d,_,x]),{nodes:T,loading:A,error:u}},Be=(h,d)=>{const[v,w]=E.useState(""),[_,x]=E.useState([]),T=(S,A,O=[])=>{if(!S||!A)return[];const u=[],R=S.toLowerCase();for(const m of A){const C=[...O,m];m.name.toLowerCase().includes(R)&&u.push({node:m,path:C}),m.zones&&m.zones.length>0&&u.push(...T(S,m.zones,C))}return u};return E.useEffect(()=>{if(h&&v&&d){const S=T(v,d.zones);x(S)}else x([]),h||w("")},[v,d,h]),{searchQuery:v,setSearchQuery:w,searchResults:_}},$e=({data:h,onSelect:d,className:v="",dataUrl:w,country:_="IT",language:x="it",placeholder:T="Select location...",username:S,password:A,enableSearch:O=!1,searchPlaceholder:u="Search location...",popup:R=!1})=>{const{nodes:m,loading:C,error:z}=ge({data:h,dataUrl:w,country:_,language:x,username:S,password:A}),{searchQuery:B,setSearchQuery:G,searchResults:P}=Be(O,m),[c,U]=E.useState([]),[f,l]=E.useState(!1),b=E.useRef(null),D=(n,j)=>{const k=c.slice(0,j);k[j]=n,U(k),(!n.zones||n.zones.length===0)&&(R&&alert(`Selected: ${n.name} (ID: ${n.id})`),d&&d(n),l(!1))},$=()=>{if(!m)return[];if(c.length===0)return m.zones;let n=c[c.length-1];return(n==null?void 0:n.zones)||[]},M=()=>c.length===0?Array.isArray(T)?T[0]||"Select location...":T||"Select location...":c.map(n=>n.name).join(" > "),W=n=>{n.stopPropagation(),U([]),d&&d(null)};if(C&&!m)return i.jsx("div",{className:`cities-dropdown loading ${v}`,children:"Loading..."});if(z&&!m)return i.jsxs("div",{className:`cities-dropdown error ${v}`,children:["Error: ",z]});const K=$();return i.jsxs("div",{className:`cities-dropdown ${v}`,ref:b,children:[i.jsxs("div",{className:"cities-dropdown-trigger",onClick:()=>{const n=!f;l(n),n||G("")},role:"button",tabIndex:0,"aria-expanded":f,"aria-haspopup":"listbox",children:[i.jsx("span",{className:"cities-dropdown-text",children:M()}),c.length>0&&i.jsx("button",{className:"cities-dropdown-clear",onClick:W,"aria-label":"Clear selection",children:"×"}),i.jsx("span",{className:"cities-dropdown-arrow",children:f?"▲":"▼"})]}),f&&i.jsxs("div",{className:"cities-dropdown-menu",role:"listbox",children:[O&&i.jsx("div",{className:"cities-dropdown-search",children:i.jsx("input",{type:"text",className:"cities-dropdown-search-input",placeholder:u,value:B,onChange:n=>{G(n.target.value),n.target.value&&U([])},onClick:n=>n.stopPropagation(),onKeyDown:n=>n.stopPropagation()})}),O&&B?P.length===0?i.jsx("div",{className:"cities-dropdown-empty",children:"No results found"}):i.jsx("ul",{className:"cities-dropdown-list",children:P.map(({node:n,path:j})=>i.jsxs("li",{className:`cities-dropdown-item ${n.zones&&n.zones.length>0?"has-children":"leaf"}`,role:"option",onClick:()=>{U(j),G(""),(!n.zones||n.zones.length===0)&&(R&&alert(`Selected: ${n.name} (ID: ${n.id})`),d&&d(n),l(!1))},children:[i.jsx("span",{className:"cities-dropdown-item-name",children:j.map(k=>k.name).join(" > ")}),n.zones&&n.zones.length>0&&i.jsx("span",{className:"cities-dropdown-item-arrow",children:"▶"})]},n.id))}):i.jsxs(i.Fragment,{children:[c.length>0&&i.jsx("div",{className:"cities-dropdown-breadcrumb",children:c.map((n,j)=>i.jsxs("button",{className:"cities-dropdown-breadcrumb-item",onClick:()=>{const k=c.slice(0,j+1);U(k)},children:[n.name,j<c.length-1&&" > "]},n.id))}),K.length===0?i.jsx("div",{className:"cities-dropdown-empty",children:"No options available"}):i.jsx("ul",{className:"cities-dropdown-list",children:K.map(n=>i.jsxs("li",{className:`cities-dropdown-item ${n.zones&&n.zones.length>0?"has-children":"leaf"}`,role:"option",onClick:()=>{D(n,c.length)},children:[i.jsx("span",{className:"cities-dropdown-item-name",children:n.name}),n.zones&&n.zones.length>0&&i.jsx("span",{className:"cities-dropdown-item-arrow",children:"▶"})]},n.id))})]})]})]})},Ve=({data:h,onSelect:d,className:v="",dataUrl:w,country:_="IT",language:x="it",placeholder:T="Select location...",username:S,password:A,popup:O=!1})=>{const{nodes:u,loading:R,error:m}=ge({data:h,dataUrl:w,country:_,language:x,username:S,password:A}),[C,z]=E.useState([]);E.useEffect(()=>{u&&z([])},[u]);const B=f=>{if(!u)return[];if(f===0)return u.zones;let l=C[f-1];return l?l.zones||[]:[]},G=(f,l)=>{if(!l){z($=>$.slice(0,f));return}const b=[...C];if(b[f]=l,f<b.length&&b.splice(f+1),l.zones&&l.zones.length>0){const $=l.zones[0];b[f+1]=$;let M=$,W=f+2;for(;M.zones&&M.zones.length>0;)b[W]=M.zones[0],M=M.zones[0],W++}z(b);const D=b[b.length-1];D&&(!D.zones||D.zones.length===0)&&(O&&alert(`Selected: ${D.name} (ID: ${D.id})`),d&&d(D))},P=()=>{let f=1;for(let l=0;l<C.length;l++){const b=C[l];if(b&&b.zones&&b.zones.length>0)f=l+2;else break}return f},c=f=>Array.isArray(T)&&T[f]?T[f]:`Select level ${f}...`;if(R&&!u)return i.jsx("div",{className:`cities-dropdown loading ${v}`,children:"Loading..."});if(m&&!u)return i.jsxs("div",{className:`cities-dropdown error ${v}`,children:["Error: ",m]});if(!u)return i.jsx("div",{className:`cities-dropdown loading ${v}`,children:"Loading..."});const U=P();return i.jsx("div",{className:`cities-dropdown cities-dropdown-cascading ${v}`,children:Array.from({length:U},(f,l)=>{const b=B(l),D=C[l],$=l>0&&!C[l-1],M=c(l);return i.jsxs("div",{className:"cities-dropdown-cascading-level",children:[i.jsxs("label",{className:"cities-dropdown-cascading-label",children:["Level ",l,":"]}),i.jsxs("select",{className:"cities-dropdown-cascading-select",value:(D==null?void 0:D.id)||"",onChange:W=>{const K=W.target.value;if(!K){G(l,null);return}const n=b.find(j=>j.id===K);n&&G(l,n)},disabled:$||b.length===0,children:[i.jsx("option",{value:"",children:$?"Select previous level first":b.length===0?"No options":M}),b.map(W=>i.jsx("option",{value:W.id,children:W.name},W.id))]},`select-${l}-${M}`)]},`${l}-${M}`)})})},ae=({model:h=0,...d})=>{switch(h){case 1:return i.jsx(Ve,{...d});case 0:default:return i.jsx($e,{...d})}};if(window.CitiesGenerator={CitiesDropdown:ae,render:(h,d)=>{const v=window.React,w=window.ReactDOM;if(!v||!w){console.error("React and ReactDOM must be loaded before CitiesGenerator");return}const _=typeof h=="string"?document.querySelector(h):h;if(!_){console.error("Container element not found");return}w.createRoot(_).render(v.createElement(ae,d))}},typeof window<"u"&&window.customElements){const h=()=>{window.React&&window.ReactDOM&&Promise.resolve().then(()=>He).catch(()=>{})};h(),setTimeout(h,100)}class Ke extends HTMLElement{constructor(){super(...arguments);ze(this,"reactRoot",null)}static get observedAttributes(){return["country","language","data-url","placeholder","username","password","enable-search","search-placeholder","model","popup"]}connectedCallback(){this.render()}attributeChangedCallback(){this.reactRoot&&this.render()}render(){if(!window.React||!window.ReactDOM){console.error("React and ReactDOM must be loaded before using cities-dropdown"),this.innerHTML='<div style="padding: 10px; color: red;">Error: React not loaded</div>';return}const v=window.React,w=window.ReactDOM,{CitiesDropdown:_}=window.CitiesGenerator||{};if(!_){console.error("CitiesGenerator not loaded"),this.innerHTML='<div style="padding: 10px; color: red;">Error: CitiesGenerator not loaded</div>';return}const x=this.getAttribute("country")||"IT",T=this.getAttribute("language")||"it",S=this.getAttribute("data-url"),A=this.getAttribute("placeholder")||"Select location...",O=this.getAttribute("username"),u=this.getAttribute("password"),R=this.getAttribute("enable-search")==="true",m=this.getAttribute("search-placeholder")||"Search location...",C=this.getAttribute("model"),z=C?parseInt(C,10):0,B=this.hasAttribute("popup"),G=c=>{this.dispatchEvent(new CustomEvent("select",{detail:c,bubbles:!0}))},P=v.createElement(_,{country:x,language:T,dataUrl:S,placeholder:A,username:O,password:u,enableSearch:R,searchPlaceholder:m,model:z,popup:B,onSelect:G});this.reactRoot||(this.reactRoot=w.createRoot(this)),this.reactRoot.render(P)}}customElements.get("cities-dropdown")||customElements.define("cities-dropdown",Ke);const He=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));L.CitiesDropdown=ae,Object.defineProperty(L,Symbol.toStringTag,{value:"Module"})});
