(function(D,E){typeof exports=="object"&&typeof module<"u"?E(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],E):(D=typeof globalThis<"u"?globalThis:D||self,E(D.CitiesGenerator={},D.React,D.ReactDOM))})(this,function(D,E,J){"use strict";var Tt=Object.defineProperty;var Ft=(D,E,J)=>E in D?Tt(D,E,{enumerable:!0,configurable:!0,writable:!0,value:J}):D[E]=J;var Ke=(D,E,J)=>Ft(D,typeof E!="symbol"?E+"":E,J);var Z={},X=J;if(process.env.NODE_ENV==="production")Z.createRoot=X.createRoot,Z.hydrateRoot=X.hydrateRoot;else{var ne=X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Z.createRoot=function(v,s){ne.usingClientEntryPoint=!0;try{return X.createRoot(v,s)}finally{ne.usingClientEntryPoint=!1}},Z.hydrateRoot=function(v,s,f){ne.usingClientEntryPoint=!0;try{return X.hydrateRoot(v,s,f)}finally{ne.usingClientEntryPoint=!1}}}var ce={exports:{}},q={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var me;function He(){if(me)return q;me=1;var v=E,s=Symbol.for("react.element"),f=Symbol.for("react.fragment"),y=Object.prototype.hasOwnProperty,j=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,x={key:!0,ref:!0,__self:!0,__source:!0};function _(R,A,T){var d,w={},m=null,b=null;T!==void 0&&(m=""+T),A.key!==void 0&&(m=""+A.key),A.ref!==void 0&&(b=A.ref);for(d in A)y.call(A,d)&&!x.hasOwnProperty(d)&&(w[d]=A[d]);if(R&&R.defaultProps)for(d in A=R.defaultProps,A)w[d]===void 0&&(w[d]=A[d]);return{$$typeof:s,type:R,key:m,ref:b,props:w,_owner:j.current}}return q.Fragment=f,q.jsx=_,q.jsxs=_,q}var ee={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Re;function Je(){return Re||(Re=1,process.env.NODE_ENV!=="production"&&function(){var v=E,s=Symbol.for("react.element"),f=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),R=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),z=Symbol.iterator,B="@@iterator";function G(e){if(e===null||typeof e!="object")return null;var t=z&&e[z]||e[B];return typeof t=="function"?t:null}var P=v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function l(e){{for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];N("error",e,r)}}function N(e,t,r){{var o=P.ReactDebugCurrentFrame,h=o.getStackAddendum();h!==""&&(t+="%s",r=r.concat([h]));var g=r.map(function(c){return String(c)});g.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,g)}}var p=!1,u=!1,S=!1,M=!1,V=!1,L;L=Symbol.for("react.module.reference");function W(e){return!!(typeof e=="string"||typeof e=="function"||e===y||e===x||V||e===j||e===T||e===d||M||e===b||p||u||S||typeof e=="object"&&e!==null&&(e.$$typeof===m||e.$$typeof===w||e.$$typeof===_||e.$$typeof===R||e.$$typeof===A||e.$$typeof===L||e.getModuleId!==void 0))}function K(e,t,r){var o=e.displayName;if(o)return o;var h=t.displayName||t.name||"";return h!==""?r+"("+h+")":r}function n(e){return e.displayName||"Context"}function F(e){if(e==null)return null;if(typeof e.tag=="number"&&l("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case y:return"Fragment";case f:return"Portal";case x:return"Profiler";case j:return"StrictMode";case T:return"Suspense";case d:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R:var t=e;return n(t)+".Consumer";case _:var r=e;return n(r._context)+".Provider";case A:return K(e,e.render,"ForwardRef");case w:var o=e.displayName||null;return o!==null?o:F(e.type)||"Memo";case m:{var h=e,g=h._payload,c=h._init;try{return F(c(g))}catch{return null}}}return null}var k=Object.assign,te=0,ye,be,Ce,_e,Oe,Te,Fe;function je(){}je.__reactDisabledLog=!0;function tt(){{if(te===0){ye=console.log,be=console.info,Ce=console.warn,_e=console.error,Oe=console.group,Te=console.groupCollapsed,Fe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:je,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}te++}}function rt(){{if(te--,te===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:k({},e,{value:ye}),info:k({},e,{value:be}),warn:k({},e,{value:Ce}),error:k({},e,{value:_e}),group:k({},e,{value:Oe}),groupCollapsed:k({},e,{value:Te}),groupEnd:k({},e,{value:Fe})})}te<0&&l("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var fe=P.ReactCurrentDispatcher,de;function oe(e,t,r){{if(de===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);de=o&&o[1]||""}return`
`+de+e}}var pe=!1,ae;{var nt=typeof WeakMap=="function"?WeakMap:Map;ae=new nt}function xe(e,t){if(!e||pe)return"";{var r=ae.get(e);if(r!==void 0)return r}var o;pe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var g;g=fe.current,fe.current=null,tt();try{if(t){var c=function(){throw Error()};if(Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch(I){o=I}Reflect.construct(e,[],c)}else{try{c.call()}catch(I){o=I}e.call(c.prototype)}}else{try{throw Error()}catch(I){o=I}e()}}catch(I){if(I&&o&&typeof I.stack=="string"){for(var a=I.stack.split(`
`),U=o.stack.split(`
`),C=a.length-1,O=U.length-1;C>=1&&O>=0&&a[C]!==U[O];)O--;for(;C>=1&&O>=0;C--,O--)if(a[C]!==U[O]){if(C!==1||O!==1)do if(C--,O--,O<0||a[C]!==U[O]){var Y=`
`+a[C].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),typeof e=="function"&&ae.set(e,Y),Y}while(C>=1&&O>=0);break}}}finally{pe=!1,fe.current=g,rt(),Error.prepareStackTrace=h}var Q=e?e.displayName||e.name:"",H=Q?oe(Q):"";return typeof e=="function"&&ae.set(e,H),H}function ot(e,t,r){return xe(e,!1)}function at(e){var t=e.prototype;return!!(t&&t.isReactComponent)}function ie(e,t,r){if(e==null)return"";if(typeof e=="function")return xe(e,at(e));if(typeof e=="string")return oe(e);switch(e){case T:return oe("Suspense");case d:return oe("SuspenseList")}if(typeof e=="object")switch(e.$$typeof){case A:return ot(e.render);case w:return ie(e.type,t,r);case m:{var o=e,h=o._payload,g=o._init;try{return ie(g(h),t,r)}catch{}}}return""}var re=Object.prototype.hasOwnProperty,Pe={},Ne=P.ReactDebugCurrentFrame;function se(e){if(e){var t=e._owner,r=ie(e.type,e._source,t?t.type:null);Ne.setExtraStackFrame(r)}else Ne.setExtraStackFrame(null)}function it(e,t,r,o,h){{var g=Function.call.bind(re);for(var c in e)if(g(e,c)){var a=void 0;try{if(typeof e[c]!="function"){var U=Error((o||"React class")+": "+r+" type `"+c+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[c]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw U.name="Invariant Violation",U}a=e[c](t,c,o,r,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(C){a=C}a&&!(a instanceof Error)&&(se(h),l("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",o||"React class",r,c,typeof a),se(null)),a instanceof Error&&!(a.message in Pe)&&(Pe[a.message]=!0,se(h),l("Failed %s type: %s",r,a.message),se(null))}}}var st=Array.isArray;function he(e){return st(e)}function ct(e){{var t=typeof Symbol=="function"&&Symbol.toStringTag,r=t&&e[Symbol.toStringTag]||e.constructor.name||"Object";return r}}function lt(e){try{return Ue(e),!1}catch{return!0}}function Ue(e){return""+e}function De(e){if(lt(e))return l("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",ct(e)),Ue(e)}var Me=P.ReactCurrentOwner,ut={key:!0,ref:!0,__self:!0,__source:!0},Le,ke;function ft(e){if(re.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return e.ref!==void 0}function dt(e){if(re.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function pt(e,t){typeof e.ref=="string"&&Me.current}function ht(e,t){{var r=function(){Le||(Le=!0,l("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}}function vt(e,t){{var r=function(){ke||(ke=!0,l("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"ref",{get:r,configurable:!0})}}var Et=function(e,t,r,o,h,g,c){var a={$$typeof:s,type:e,key:t,ref:r,props:c,_owner:g};return a._store={},Object.defineProperty(a._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(a,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(a,"_source",{configurable:!1,enumerable:!1,writable:!1,value:h}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a};function gt(e,t,r,o,h){{var g,c={},a=null,U=null;r!==void 0&&(De(r),a=""+r),dt(t)&&(De(t.key),a=""+t.key),ft(t)&&(U=t.ref,pt(t,h));for(g in t)re.call(t,g)&&!ut.hasOwnProperty(g)&&(c[g]=t[g]);if(e&&e.defaultProps){var C=e.defaultProps;for(g in C)c[g]===void 0&&(c[g]=C[g])}if(a||U){var O=typeof e=="function"?e.displayName||e.name||"Unknown":e;a&&ht(c,O),U&&vt(c,O)}return Et(e,a,U,h,o,Me.current,c)}}var ve=P.ReactCurrentOwner,Ie=P.ReactDebugCurrentFrame;function $(e){if(e){var t=e._owner,r=ie(e.type,e._source,t?t.type:null);Ie.setExtraStackFrame(r)}else Ie.setExtraStackFrame(null)}var Ee;Ee=!1;function ge(e){return typeof e=="object"&&e!==null&&e.$$typeof===s}function ze(){{if(ve.current){var e=F(ve.current.type);if(e)return`

Check the render method of \``+e+"`."}return""}}function At(e){return""}var Ge={};function mt(e){{var t=ze();if(!t){var r=typeof e=="string"?e:e.displayName||e.name;r&&(t=`

Check the top-level render call using <`+r+">.")}return t}}function We(e,t){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var r=mt(t);if(Ge[r])return;Ge[r]=!0;var o="";e&&e._owner&&e._owner!==ve.current&&(o=" It was passed a child from "+F(e._owner.type)+"."),$(e),l('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,o),$(null)}}function Ye(e,t){{if(typeof e!="object")return;if(he(e))for(var r=0;r<e.length;r++){var o=e[r];ge(o)&&We(o,t)}else if(ge(e))e._store&&(e._store.validated=!0);else if(e){var h=G(e);if(typeof h=="function"&&h!==e.entries)for(var g=h.call(e),c;!(c=g.next()).done;)ge(c.value)&&We(c.value,t)}}}function Rt(e){{var t=e.type;if(t==null||typeof t=="string")return;var r;if(typeof t=="function")r=t.propTypes;else if(typeof t=="object"&&(t.$$typeof===A||t.$$typeof===w))r=t.propTypes;else return;if(r){var o=F(t);it(r,e.props,"prop",o,e)}else if(t.PropTypes!==void 0&&!Ee){Ee=!0;var h=F(t);l("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",h||"Unknown")}typeof t.getDefaultProps=="function"&&!t.getDefaultProps.isReactClassApproved&&l("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function St(e){{for(var t=Object.keys(e.props),r=0;r<t.length;r++){var o=t[r];if(o!=="children"&&o!=="key"){$(e),l("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",o),$(null);break}}e.ref!==null&&($(e),l("Invalid attribute `ref` supplied to `React.Fragment`."),$(null))}}var Be={};function Ve(e,t,r,o,h,g){{var c=W(e);if(!c){var a="";(e===void 0||typeof e=="object"&&e!==null&&Object.keys(e).length===0)&&(a+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var U=At();U?a+=U:a+=ze();var C;e===null?C="null":he(e)?C="array":e!==void 0&&e.$$typeof===s?(C="<"+(F(e.type)||"Unknown")+" />",a=" Did you accidentally export a JSX literal instead of a component?"):C=typeof e,l("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",C,a)}var O=gt(e,t,r,h,g);if(O==null)return O;if(c){var Y=t.children;if(Y!==void 0)if(o)if(he(Y)){for(var Q=0;Q<Y.length;Q++)Ye(Y[Q],e);Object.freeze&&Object.freeze(Y)}else l("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ye(Y,e)}if(re.call(t,"key")){var H=F(e),I=Object.keys(t).filter(function(Ot){return Ot!=="key"}),Ae=I.length>0?"{key: someKey, "+I.join(": ..., ")+": ...}":"{key: someKey}";if(!Be[H+Ae]){var _t=I.length>0?"{"+I.join(": ..., ")+": ...}":"{}";l(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Ae,H,_t,H),Be[H+Ae]=!0}}return e===y?St(O):Rt(O),O}}function wt(e,t,r){return Ve(e,t,r,!0)}function yt(e,t,r){return Ve(e,t,r,!1)}var bt=yt,Ct=wt;ee.Fragment=y,ee.jsx=bt,ee.jsxs=Ct}()),ee}process.env.NODE_ENV==="production"?ce.exports=He():ce.exports=Je();var i=ce.exports;function Ze(v){const s={IT:"EU",GB:"EU",FR:"EU",DE:"EU",ES:"EU",PT:"EU",NL:"EU",BE:"EU",CH:"EU",AT:"EU",SE:"EU",NO:"EU",DK:"EU",FI:"EU",PL:"EU",GR:"EU",IE:"EU",CZ:"EU",HU:"EU",RO:"EU",BG:"EU",HR:"EU",SK:"EU",SI:"EU",LT:"EU",LV:"EU",EE:"EU",LU:"EU",MT:"EU",CY:"EU",IS:"EU",LI:"EU",MC:"EU",SM:"EU",VA:"EU",AD:"EU",AL:"EU",BA:"EU",ME:"EU",MK:"EU",RS:"EU",XK:"EU",UA:"EU",BY:"EU",MD:"EU",RU:"EU",US:"NA",CA:"NA",MX:"NA",GT:"NA",BZ:"NA",SV:"NA",HN:"NA",NI:"NA",CR:"NA",PA:"NA",CU:"NA",JM:"NA",HT:"NA",DO:"NA",BS:"NA",BB:"NA",TT:"NA",BR:"SA",AR:"SA",CL:"SA",CO:"SA",PE:"SA",VE:"SA",EC:"SA",BO:"SA",PY:"SA",UY:"SA",GY:"SA",SR:"SA",GF:"SA",FK:"SA",CN:"AS",JP:"AS",IN:"AS",KR:"AS",KP:"AS",ID:"AS",TH:"AS",VN:"AS",PH:"AS",MY:"AS",SG:"AS",BD:"AS",PK:"AS",AF:"AS",IR:"AS",IQ:"AS",SA:"AS",AE:"AS",IL:"AS",TR:"AS",KZ:"AS",UZ:"AS",MM:"AS",LK:"AS",NP:"AS",KH:"AS",LA:"AS",MN:"AS",TW:"AS",HK:"AS",MO:"AS",ZA:"AF",EG:"AF",NG:"AF",KE:"AF",ET:"AF",GH:"AF",TZ:"AF",UG:"AF",DZ:"AF",MA:"AF",SD:"AF",AO:"AF",MZ:"AF",ZM:"AF",ZW:"AF",MW:"AF",MG:"AF",CM:"AF",CI:"AF",SN:"AF",ML:"AF",BF:"AF",NE:"AF",TD:"AF",LY:"AF",TN:"AF",RW:"AF",BJ:"AF",TG:"AF",GN:"AF",SL:"AF",LR:"AF",MR:"AF",GM:"AF",GW:"AF",CV:"AF",ST:"AF",GQ:"AF",GA:"AF",CG:"AF",CD:"AF",CF:"AF",SS:"AF",ER:"AF",DJ:"AF",SO:"AF",KM:"AF",MU:"AF",SC:"AF",BW:"AF",NA:"AF",LS:"AF",SZ:"AF",AU:"OC",NZ:"OC",PG:"OC",FJ:"OC",NC:"OC",PF:"OC",SB:"OC",VU:"OC",WS:"OC",TO:"OC",KI:"OC",FM:"OC",MH:"OC",PW:"OC",TV:"OC",NR:"OC",AQ:"AN"},f=v.toUpperCase();return s[f]||"EU"}const Se=({data:v,dataUrl:s,country:f,language:y,username:j,password:x})=>{const[_,R]=E.useState(v||null),[A,T]=E.useState(!1),[d,w]=E.useState(null);return E.useEffect(()=>{if(v){R(v);return}if(f){w(null),R(null);const b=(s||"https://raw.githubusercontent.com/flashboss/cities-generator/master/_db").replace(/\.json$/,"").replace(/\/$/,""),z=(y||"it").toLowerCase(),B=f.toUpperCase(),G=Ze(B),P=`${b}/${G}/${B}/${z}.json`;(async()=>{T(!0),w(null);try{const N={};if(j&&x){const S=btoa(`${j}:${x}`);N.Authorization=`Basic ${S}`}const p=await fetch(P,{headers:N});if(!p.ok)throw new Error(`Failed to load data: ${p.status} ${p.statusText}`);const u=await p.json();R(u)}catch(N){const p=N instanceof Error?N.message:"Failed to load country data";w(p),R(null)}finally{T(!1)}})()}},[v,f,y,s,j,x]),{nodes:_,loading:A,error:d}},$e=(v,s)=>{const[f,y]=E.useState(""),[j,x]=E.useState([]),_=(R,A,T=[])=>{if(!R||!A)return[];const d=[],w=R.toLowerCase();for(const m of A){const b=[...T,m];m.name.toLowerCase().includes(w)&&d.push({node:m,path:b}),m.zones&&m.zones.length>0&&d.push(..._(R,m.zones,b))}return d};return E.useEffect(()=>{if(v&&f&&s){const R=_(f,s.zones);x(R)}else x([]),v||y("")},[f,s,v]),{searchQuery:f,setSearchQuery:y,searchResults:j}},Qe=({data:v,onSelect:s,className:f="",dataUrl:y,country:j="IT",language:x="it",placeholder:_="Select location...",username:R,password:A,enableSearch:T=!1,searchPlaceholder:d="Search location...",popup:w=!1})=>{const{nodes:m,loading:b,error:z}=Se({data:v,dataUrl:y,country:j,language:x,username:R,password:A}),{searchQuery:B,setSearchQuery:G,searchResults:P}=$e(T,m),[l,N]=E.useState([]),[p,u]=E.useState(!1),S=E.useRef(null),M=(n,F)=>{const k=l.slice(0,F);k[F]=n,N(k),(!n.zones||n.zones.length===0)&&(w&&alert(`Selected: ${n.name} (ID: ${n.id})`),s&&s(n),u(!1))},V=()=>{if(!m)return[];if(l.length===0)return m.zones;let n=l[l.length-1];return(n==null?void 0:n.zones)||[]},L=()=>l.length===0?Array.isArray(_)?_[0]||"Select location...":_||"Select location...":l.map(n=>n.name).join(" > "),W=n=>{n.stopPropagation(),N([]),s&&s(null)};if(b&&!m)return i.jsx("div",{className:`cities-dropdown loading ${f}`,children:"Loading..."});if(z&&!m)return i.jsxs("div",{className:`cities-dropdown error ${f}`,children:["Error: ",z]});const K=V();return i.jsxs("div",{className:`cities-dropdown ${f}`,ref:S,children:[i.jsxs("div",{className:"cities-dropdown-trigger",onClick:()=>{const n=!p;u(n),n||G("")},role:"button",tabIndex:0,"aria-expanded":p,"aria-haspopup":"listbox",children:[i.jsx("span",{className:"cities-dropdown-text",children:L()}),l.length>0&&i.jsx("button",{className:"cities-dropdown-clear",onClick:W,"aria-label":"Clear selection",children:"×"}),i.jsx("span",{className:"cities-dropdown-arrow",children:p?"▲":"▼"})]}),p&&i.jsxs("div",{className:"cities-dropdown-menu",role:"listbox",children:[T&&i.jsx("div",{className:"cities-dropdown-search",children:i.jsx("input",{type:"text",className:"cities-dropdown-search-input",placeholder:d,value:B,onChange:n=>{G(n.target.value),n.target.value&&N([])},onClick:n=>n.stopPropagation(),onKeyDown:n=>n.stopPropagation()})}),T&&B?P.length===0?i.jsx("div",{className:"cities-dropdown-empty",children:"No results found"}):i.jsx("ul",{className:"cities-dropdown-list",children:P.map(({node:n,path:F})=>i.jsxs("li",{className:`cities-dropdown-item ${n.zones&&n.zones.length>0?"has-children":"leaf"}`,role:"option",onClick:()=>{N(F),G(""),(!n.zones||n.zones.length===0)&&(w&&alert(`Selected: ${n.name} (ID: ${n.id})`),s&&s(n),u(!1))},children:[i.jsx("span",{className:"cities-dropdown-item-name",children:F.map(k=>k.name).join(" > ")}),n.zones&&n.zones.length>0&&i.jsx("span",{className:"cities-dropdown-item-arrow",children:"▶"})]},n.id))}):i.jsxs(i.Fragment,{children:[l.length>0&&i.jsx("div",{className:"cities-dropdown-breadcrumb",children:l.map((n,F)=>i.jsxs("button",{className:"cities-dropdown-breadcrumb-item",onClick:()=>{const k=l.slice(0,F+1);N(k)},children:[n.name,F<l.length-1&&" > "]},n.id))}),K.length===0?i.jsx("div",{className:"cities-dropdown-empty",children:"No options available"}):i.jsx("ul",{className:"cities-dropdown-list",children:K.map(n=>i.jsxs("li",{className:`cities-dropdown-item ${n.zones&&n.zones.length>0?"has-children":"leaf"}`,role:"option",onClick:()=>{M(n,l.length)},children:[i.jsx("span",{className:"cities-dropdown-item-name",children:n.name}),n.zones&&n.zones.length>0&&i.jsx("span",{className:"cities-dropdown-item-arrow",children:"▶"})]},n.id))})]})]})]})},Xe=({data:v,onSelect:s,className:f="",dataUrl:y,country:j="IT",language:x="it",placeholder:_="Select location...",username:R,password:A,popup:T=!1})=>{const{nodes:d,loading:w,error:m}=Se({data:v,dataUrl:y,country:j,language:x,username:R,password:A}),[b,z]=E.useState([]);E.useEffect(()=>{d&&z([])},[d]);const B=p=>{if(!d)return[];if(p===0)return d.zones;let u=b[p-1];return u?u.zones||[]:[]},G=(p,u)=>{if(!u){z(V=>V.slice(0,p));return}const S=[...b];if(S[p]=u,p<S.length&&S.splice(p+1),u.zones&&u.zones.length>0){const V=u.zones[0];S[p+1]=V;let L=V,W=p+2;for(;L.zones&&L.zones.length>0;)S[W]=L.zones[0],L=L.zones[0],W++}z(S);const M=S[S.length-1];M&&(!M.zones||M.zones.length===0)&&(T&&alert(`Selected: ${M.name} (ID: ${M.id})`),s&&s(M))},P=()=>{let p=1;for(let u=0;u<b.length;u++){const S=b[u];if(S&&S.zones&&S.zones.length>0)p=u+2;else break}return p},l=p=>Array.isArray(_)&&_[p]?_[p]:`Select level ${p}...`;if(w&&!d)return i.jsx("div",{className:`cities-dropdown loading ${f}`,children:"Loading..."});if(m&&!d)return i.jsxs("div",{className:`cities-dropdown error ${f}`,children:["Error: ",m]});if(!d)return i.jsx("div",{className:`cities-dropdown loading ${f}`,children:"Loading..."});const N=P();return i.jsx("div",{className:`cities-dropdown cities-dropdown-cascading ${f}`,children:Array.from({length:N},(p,u)=>{const S=B(u),M=b[u],V=u>0&&!b[u-1],L=l(u);return i.jsxs("div",{className:"cities-dropdown-cascading-level",children:[i.jsxs("label",{className:"cities-dropdown-cascading-label",children:["Level ",u,":"]}),i.jsxs("select",{className:"cities-dropdown-cascading-select",value:(M==null?void 0:M.id)||"",onChange:W=>{const K=W.target.value;if(!K){G(u,null);return}const n=S.find(F=>F.id===K);n&&G(u,n)},disabled:V||S.length===0,children:[i.jsx("option",{value:"",children:V?"Select previous level first":S.length===0?"No options":L}),S.map(W=>i.jsx("option",{value:W.id,children:W.name},W.id))]},`select-${u}-${L}`)]},`${u}-${L}`)})})},le=({model:v=0,...s})=>{switch(v){case 1:return i.jsx(Xe,{...s});case 0:default:return i.jsx(Qe,{...s})}};typeof window<"u"&&typeof window.process>"u"&&(window.process={env:{NODE_ENV:"production"}});const we=()=>typeof E<"u"&&typeof Z<"u"?{React:E,ReactDOM:Z}:typeof window<"u"&&window.React&&window.ReactDOM?{React:window.React,ReactDOM:window.ReactDOM}:null,ue=we();ue&&typeof window<"u"&&(window.React=ue.React,window.ReactDOM=ue.ReactDOM),window.CitiesGenerator={CitiesDropdown:le,render:(v,s)=>{const f=we();if(!f){console.error("React and ReactDOM must be loaded before CitiesGenerator.render()");return}const y=typeof v=="string"?document.querySelector(v):v;if(!y){console.error("Container element not found");return}f.ReactDOM.createRoot(y).render(f.React.createElement(le,s))}},typeof window<"u"&&window.customElements&&Promise.resolve().then(()=>et).catch(()=>{});class qe extends HTMLElement{constructor(){super(...arguments);Ke(this,"reactRoot",null)}static get observedAttributes(){return["country","language","data-url","placeholder","username","password","enable-search","search-placeholder","model","popup"]}connectedCallback(){this.render()}attributeChangedCallback(){this.reactRoot&&this.render()}render(){if(!window.React||!window.ReactDOM){console.error("React and ReactDOM must be loaded before using cities-dropdown"),this.innerHTML='<div style="padding: 10px; color: red;">Error: React not loaded</div>';return}const f=window.React,y=window.ReactDOM,{CitiesDropdown:j}=window.CitiesGenerator||{};if(!j){console.error("CitiesGenerator not loaded"),this.innerHTML='<div style="padding: 10px; color: red;">Error: CitiesGenerator not loaded</div>';return}const x=this.getAttribute("country")||"IT",_=this.getAttribute("language")||"it",R=this.getAttribute("data-url"),A=this.getAttribute("placeholder")||"Select location...",T=this.getAttribute("username"),d=this.getAttribute("password"),w=this.getAttribute("enable-search")==="true",m=this.getAttribute("search-placeholder")||"Search location...",b=this.getAttribute("model"),z=b?parseInt(b,10):0,B=this.hasAttribute("popup"),G=l=>{this.dispatchEvent(new CustomEvent("select",{detail:l,bubbles:!0}))},P=f.createElement(j,{country:x,language:_,dataUrl:R,placeholder:A,username:T,password:d,enableSearch:w,searchPlaceholder:m,model:z,popup:B,onSelect:G});this.reactRoot||(this.reactRoot=y.createRoot(this)),this.reactRoot.render(P)}}customElements.get("cities-dropdown")||customElements.define("cities-dropdown",qe);const et=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));D.CitiesDropdown=le,Object.defineProperty(D,Symbol.toStringTag,{value:"Module"})});
