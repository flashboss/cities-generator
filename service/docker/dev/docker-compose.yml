version: '3'
services:
  auth-ct.vige.it:
    image: "quay.io/keycloak/keycloak:20.0.1"
    ports:
      - "8080:8080"
    environment:
      - KEYCLOAK_ADMIN=admin
      - KEYCLOAK_ADMIN_PASSWORD=admin
      - KEYCLOAK_IMPORT=/workspace/cities-realm.json
    command:
      - start-dev --import-realm
    volumes:
      - ./migration/import:/opt/keycloak/data/import
      - ./migration/cities-generator:/home/cguser/cities-generator
  cities-generator-service.vige.it:
    image: "vige/cities-generator"
    ports:
      - "8380:8080"
    environment:
      - COUNTRY=${COUNTRY}