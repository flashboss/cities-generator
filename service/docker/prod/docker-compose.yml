version: '3'
services:
  auth-ct.vige.it:
    image: "quay.io/keycloak/keycloak:20.0.2"
    ports:
      - "8443:8443"
    environment:
      - KEYCLOAK_ADMIN=admin
      - KEYCLOAK_ADMIN_PASSWORD=admin
    command:
      - start --hostname=auth-ct.vige.it --https-key-store-file=/opt/keycloak/conf/cert/application.keystore --import-realm
    volumes:
      - ./volume/import:/opt/keycloak/data/import
      - ./volume/cert:/opt/keycloak/conf/cert
  cities-generator-service.vige.it:
    image: "vige/cities-generator"
    ports:
      - "8743:8443"
    environment:
      - COUNTRY=${COUNTRY}
    volumes:
      - cities-generator-volume:/root/cities-generator
volumes:
  cities-generator-volume: